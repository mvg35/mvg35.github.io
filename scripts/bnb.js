const cleaningConfig = [{
  section_name: ['Entrada'], tasks: [
    {
      text: [
        'Para encontrar la entrada del fraccionamiento, busque en google maps: Caseta Real del Sol ii.'
      ],
      content: 'maps.png'
    }, {
      text: [
        'Recibiran un codigo QR que abre la reja del fraccionamiento. Dirección es Real de Grijalva 8987.'
      ]
    }, {
      text: [
        'Entre al fraccionamiento, de  un giro a la izquierda, seguido por uno a la derecha, y siga hasta el fondo. Es la casa que se ve hasta el final, blanca con dos arboles grandes.'
      ],
      content: 'view.jpeg'
    }, {
      text: [
        'Recibiran un codigo de acceso para la puerta principal de la casa.'
      ],
      content: 'keypad_esp.png'
    },
  ]
}, {
  section_name: ['Iniciales/Generales'], tasks: [
    {
      text: [
        'Favor de asegurarse que este la tarjetita blanca. Favor de decirme si no esta, es muy importante'
      ], content: 'entrada.png'
    }, {
      text: [
        'Abajo de la lavadora, hay un cajon con tres divisiones, en la de la derecha encontrara una llave verde la cual abre el cuartito de atras donde esta todo lo necesario para la limpieza. La llave abre la cerradura de arriba y la puerta es un poco dificil de abrir'
      ]
    }, {
      text: [
        'En el cuartito de atras tratamos de tener las cosas organizadas, tome todo lo que vaya a requerir y al finalizar regreselas a su lugar por favor'
      ], content: 'cuarto_limpieza.png'
    }, {
      text: [
        'Visitar cada cuarto y empezar con la lavadera de las camas/sabanas que hayan sido usadas. Tambien las toallas, trapos de los baños, etc. Esto es critico ya que es lo que mas tiempo tomara. Favor de no cargar de mas la lavadora.'
      ], content: 'lavadora.png'
    }, {
      text: [
        'Son dos camas queens, favor de cambiar sabanas/colcha/funda de las que fuero usadas y ponerle limpias. Las limpias deberan de estar en el armario del cuarto principal'
      ]
    }, {
      text: [
        'Trate de incluir a la lavadora (o hacer una especial) para los trapos que se hayan usado en la limpieza pasada, asi para irlos rotando'
      ]
    }, {
      text: [
        'Sacar basuras de cuartos y baños, dejar los botes vacios y con bolsas'
      ]
    }, {
      text: [
        'Al finalizar, tratar de dejar las ventanas, persianas y cortinas cerradas'
      ]
    },
  ]
}, {
      section_name: ['Sala'], tasks: [
          {
              text: [
                  'Limpiar, verificar, que esten bien y que esten en especial: Tele, Google Cast, Control, Decoraciones'
              ], content: 'sala_1.png'
          }, {
              text: [
                  'Limpiar sofa, verificar que no haya manchas o rotaduras en cogines o sofa'
              ], content: 'sala_2.png'
          }, {
              text: [
                  'Verificar camara, que este conectada y prendida, esta en la ventana cerca de la palmera'
              ]
          }, {
              text: [
                  'Verificar que esta extension este conectada y que tenga ese aparatito conectado, FAVOR DE APAGAR Y PRENDER LA EXTENSION.'
              ], content: 'candado.jpg'
          },
      ]
  }, {
      section_name: ['Comedor'], tasks: [
          {
              text: [
                  'Verificar que la camara de la puerta trasera este bien y conectada'
              ]
          }, {
              text: [
                  'Verificar que la el centro de mesa tenga lo princial: sal, pimienta, jarroncitos'
              ]
          }, {
              text: [
                  'Verificar que la mesa y sillas no tengan algun daño o mancha grave fresca'
              ]
          }, {
              text: [
                  'Verificar que esten las decoraciones'
              ], content: 'comedor.jpg' 
          },
      ]
  }, {
      section_name: ['Cocina'], tasks: [
          {
              text: [
                  'Verificar que la camara de la puerta trasera este bien y conectada'
              ]
          }, {
              text: [
                  'Verificar que la el centro de mesa tenga lo princial: sal, pimienta, jarroncitos'
              ]
          }, {
              text: [
                  'Verificar que la mesa y sillas no tengan algun daño o mancha grave'
              ]
          }, {
              text: [
                  'Verificar que esten las 4 decoraciones, 3 patitos'
              ], content: 'comedor.jpg'
          }
      ]
  }, {
      section_name: ['Baños'], tasks: [
          {
              text: [
                  'Limpiar y rellenar lo necesario en los baños'
              ], content: 'banos.jpg'
          }, {
              text: [
                  'En regaderas, favor de rellenar el shampoo y jabón liquido (body wash). No dejar que baje de la mitad. El shampoo es el blanco y el jabon el mas rosado'
              ], content: 'bano1.jpg'
          }, {
              text: [
                  'Rellenar este baño - Favor de agregar un poco de agua y revolver para que dure mas y para que sea mas facil de dispensar (1/8 agua 7/8 limpiador)'
              ], content: 'bano2.jpg'
          }, {
              text: [
                  'En todos los baños, rellenar o mantener lo mas lleno posible el jabon de mano liquido - todos estos limpiadores estaran en el cuartito para rellenar'
              ], content: 'cuarto_limpieza_2.jpg'
          }, {
              text: [
                  'Dejar un rollo de papel lleno puesto - y otros 2 ya sean dos nuevos o uno nuevo y otro semi nuevo - en cada baño'
              ]
          }, {
              text: [
                  'Acomodar los gabinetes de los baños, el baño del cuarto principal tiene varias cosas como botiquin de salud, o qtips'
              ]
          }
      ]
  }, {
      section_name: ['Oficina'], tasks: [
          {
              text: [
                  'Ver que monitor este bien, cables esten en orden y ahi (HDMI y luz). Que el jarroncito de tequila este ahi. Que la plantita este bien. Hacer sillon cama en sillon si es necesario'
              ], content: 'oficina1.jpg'
          }, {
              text: [
                  'Ver que el burosito este bien, que los libros esten ahi, que extension y wifi (pegado al buro) esten prendidos, que los jarrones y decoraciones esten bien y completos'
              ]
          }, {
              text: [
                  'Ver que ambas canastitas esten bien.'
              ], content: 'oficina2.jpg'
          }, {
              text: [
                  'Verificar que el balcon este cerrado con los dos candados, y que la llave este en su lugar o regresarla (tapa azul)'
              ]
          }, {
              text: [
                  'Verificar que proyector este bien, ver que google cast este ahi, y el control'
              ], content: 'oficina3.jpg'
          }
      ]
  }, {
      section_name: ['Salida'], tasks: [
          {
              text: [
                  'Apagar aire o calefaccion'
              ], content: 'calenton.jpeg'
          }, {
              text: [
                  'Dejar tarjetitas de la entrada en su lugar. Avisarme si no hay una'
              ], content: 'tarjetitas.jpeg'
          }, {
              text: [
                  'Regresar cosas de limpieza al cuartito de atras, cerrarlo, y regresar llave a su lugar inicial'
              ], content: 'cuartito_key.png'
          }, {
              text: [
                  'Favor de asegurarse que todas las puertas y candados esten cerrados. Tambien las ventanas y persianas. Dejar dos ventanas de baño un poquitito abiertas'
              ]
          }, {
              text: [
                  'Mandeme un mesajito diciendo que ya va de salida y porfavor mandeme una reseña del 1-5 de que tan limpio encontro el lugar para calificar al huesped en Airbnb'
              ]
          }
      ]
  },
];

const bnbConfig = [{
        section_name: ['Entrada', 'Entrance'], url:'entrada', tasks: [
            {
                text: [
                    'Para encontrar la entrada del fraccionamiento, busque en google maps "Caseta Real del Sol ii."',
                    'To find the community\'s entrance, Search "Caseta Real Del Sol ii" in Google Maps.'
                ], content: 'maps.png'
            }, {
                text: [
                    'Recibirán un código QR que abre la reja del fraccionamiento solo las primeras entradas. Dirección es Real de Grijalva 8987.',
                    'We will send you a QR code that will open the community\'s gate for your entrance day only.'
                ]
            }, {
                text: [
                    'Entre al fraccionamiento, de un giro a la izquierda, seguido por uno a la derecha, y siga hasta el fondo. Es la casa que se ve hasta el final, blanca con dos arboles grandes.',
                    'After entering the gate, turn left instantly, followed by a right turn, then keep going straight down the street. It\'s the house that\'s down the road, white house with two big trees.'
                ], content: 'view.jpeg'
            }, {
                text: [
                    'Recibiran un código de acceso para la puerta principal de la casa antes de su entrada (3:50pm). Este código les servira durante toda su estadía hasta su hora de salida (11:00am). Favor de tratar de manternar las otras puertas cerradas y con seguro.',
                    'You will be receiveng an access code before your check-in (3:50pm) which should open the house\'s front door. You will be using this code throughout your stay until your check-out (11:00am). Please try to maintain the other doors closed and locked.'
                ], content: ['keypad_esp.png', 'keypad.png']
            }, {
                text: [
                    'Al entrar vera una tarjeta blanca, esta le servira para abrir la reja del fraccionamiento en vez del código QR por el resto de su estadia. FAVOR DE CUIDARLA YA QUE SE LES TENDRA QUE COBRAR EN CASO DE SER EXTRAVIADA',
                    'You should see a small white card right after entering, which will serve you to open the front gate for the rest of your stay. PLEASE TAKE CARE OF IT SINCE WE WILL HAVE TO CHARGE YOU IN CASE IT GETS LOST'
                ]
            }, {
                text: [
                    'La calefaccion es el control blanco de arriba. El aire acondicionado es el control amarillo de abajo. El aire esta desabilitado en invierno y vice versa',
                    'You can control the heater with the upper white controller. The AC is controlled with the bottom yellow controller. The AC is disabled during winter and vice-versa.'
                ], content: 'air.jpg'
            }, {
              text: [
                  'El fraccionamiento cuenta con una puerta peatonal, la cual usa un codigo de 6 digitos para entrar que cambian cada día. Si lo requiere, favor de pedirmelo. Tambien se usa en caso de Uber o UberEats.',
                  'The community\'s gate also counts with a pedestrian door, which uses a 6 digits code that changes every day. If you require it, please ask me for it. This code is also used for Uber or UberEats.'
              ]
            }, {
              text: [
                  'WIFI: INFINITUM1BA2_2.4 | Contraseña: W27cgBX3M9',
                  'WIFI: INFINITUM1BA2_2.4 | Password: W27cgBX3M9'
              ]
            }            
        ]
    }, {
        section_name: ['Cocina', 'Kitchen'], url:'cocina', tasks: [{
                text: [
                    'Aqui estan las cosas en la cocina.',
                    'This is where the different kitchen items are located at.'
                ], content: 'cocina.jpg'
            }
        ]
    }, {
        section_name: ['Sala', 'Living Room'], url:'sala', tasks: [{
                text: [
                    'Disfrute de la sala. La tele toma ~1 minuto de prenderla en tomar internet para accesar las apps or el google cast. Para el google cast cambie el Input a HDMI 1.',
                    'Enjoy the living room. The TV takes ~1 minute from turning it on to detect the wifi in order to access the apps or google cast. Switch the input to HDMI 1 to cast into the TV.'
                ], content: 'sala.jpg' 
            }, {
                text: [
                    'Por favor de no desconectar las conecciones detras de la palmera. Uno es de la camara.',
                    'Please do not unplug any of the sockets behind the palm tree, one of them is for the outdoor camera.'
                ]
            }
        ]
    }, {
        section_name: ['Baños', 'Restrooms'], url:'bano', tasks: [{
                text: [
                    'Favor de tirar el papel de baño al inodoro, no al bote de basura. Moderadamente.',
                    'Please dispose of TP in the toilet, not the trash can. Moderately.'
                ]
            },{
                text: [
                    'Shampoo y Jabon estan en la regadera. El Shampoo esta mas pegado a la pared.',
                    'You can find Shampoo and Body Wash in the shower. Shampoo is closer to the wall.'
                ], content: 'bano1.jpg' 
            }, {
                text: [
                    'Shampoo y Jabon de cuerpo.',
                    'Shampoo and Body Wash.'
                ], content: 'bano2.jpg' 
            }
        ]
    }, {
        section_name: ['Check-Out', 'Check-Out'], url:'check-out', tasks: [{
                text: [
                    'Favor de regresar las llaves a su lugar, cerrar puertas, ventanas, candados, apagar aparatos electronicos, conectar cosas que pudieron haber desconectado.',
                    'Please return any keys you could\'ve used to their original place, including the gate\'s card, close doors, close windows, lock external locks, turn off electronics, plug anything that couldve been unplugged.'
                ], content: 'entrada.png'
            }, {
                text: [
                    'Favor de regresar las llaves del balcon a su lugar original.',
                    'Please return the balcony\'s key back to its original place.'
                ], content: 'oficina2.jpg'
            }, {
                text: [
                    'Favor de dejar las camas que fueron usadas destendidas, esto nos facilitara la tarea de limpieza!',
                    'Please leave unattended all the beds that where used during your stay. This will make our cleanup process a bit easier.'
                ]
            }, {
                text: [
                    'Favor de limpiar y ordenar un poco las areas que se usaron. Recoger basuras.',
                    'Please pick up after yourself.'
                ]
            }, {
                text: [
                    'Favor de apagar el aire acondicionado, calefaccion, o luces.',
                    'Please turn off the AC, heater system, or any light left.'
                ], content: 'calenton.jpeg'
            }, {
                text: [
                    'Si es posible, mandarme un mensaje de que ya han salido de la casa.',
                    'If possible, please let me know when you\'ve left the property.'
                ]
            }, {
                text: [
                    'Gracias por tu visita y buen viaje!',
                    'Thank you for your visit and have a nice trip!'
                ]
            }, {
              text: [
                  'Por favor no olvide dejarnos un review en Airbnb si su estadia fue de su agrado, nos ayudara mucho!',
                  'Please don\'t forget to leave a review if you had an awesome stay, it will be very helpful!'
              ]
          }
        ]
    }
]


const _sitesUrl = 'https://mvg35.github.io/bnb';

class Tabs extends React.Component {

  state = {
      lang: 0,
      modals: null,
      sidenavs: null
  }

  _cleanPathName = '/clean';

  isCleaning() {
    return window.location.pathname === this._cleanPathName;
  }

  handleLanguageClick() {
      this.setState({ lang: this.state.lang ? 0 : 1 })
  }

  componentDidMount() {
      var modalElems = document.querySelectorAll('.modal');
      var sidenavElems = document.querySelectorAll('.sidenav');

      document.querySelector('.tablinks').children[0].click();

      this.setState({
          modals: M.Modal.init(modalElems),
          sidenavs: M.Sidenav.init(sidenavElems)
      }, () => {
          this.state.sidenavs[0].open();
          const location = window.location.href;
          if (location.indexOf("#") > -1) {
            const reg = location.substring(location.indexOf('#') + 9, location.length);
            document.querySelectorAll('.tablinks a')[String(reg)].click();
          } else {
            this.state.modals[0].open();
          }
      });
  }


  
  render() {
      const config = this.isCleaning() ? cleaningConfig : bnbConfig;
      const greetings = this.isCleaning() ?
      ['Hola y gracias por ayudarnos con la limpieza de este AirBNB'] :
      ['Hola y bienvenido a su casa por los siguientes días', 'Hello and welcome to your home for the following days'];
      const warnings = this.isCleaning() ?
      [`
          Gracias por ayudarnos con esta tarea. La meta es dejar la casa limpia, barrida, trapeada, desinfectada y sacudida en general | 
          Favor de avisarme cuando se este acabando un producto, si ya no aguanta otras 3 limpiadas o rellenos | 
      `] : ['', ''];

      const general = [
          '',
          ''
      ]
      const continua = [
          'Continuar',
          'Continue'
      ]
      const inicio = [
          'Inicio',
          'Start'
      ]



      return(
          <div className="main-tab-div">
              <div className="container" style={{textAlign:'center'}}>
                  <div className="modal modal-fixed-footer" style={{height: '80%', maxHeight: '80%'}}>
                      <div className="modal-content">
                          <h5>
                              {greetings[this.state.lang]}
                          </h5>
                          <div className="row">
                              <div className="col s12">
                                  <a href="https://airbnb.com/h/lacasitaconsulado" target="_blank">
                                      <img 
                                        style={{width:'60%'}} 
                                        className="responsive-img" 
                                        src="/media/airbnb/initial.jpeg" 
                                      />
                                  </a>
                              </div>
                          </div>
                          <p>
                              { warnings[this.state.lang] }
                              { general[this.state.lang] }
                          </p>
                          {
                              this.isCleaning() ?
                              '' :
                              <a
                                  className="waves-effect waves-light btn-small"
                                  onClick={() => this.handleLanguageClick()}
                              >
                                  { this.state.lang ? 'Español' : 'English'}
                              </a>
                          }
                      </div>
                      <div className="modal-footer">
                          <a className="modal-close waves-effect waves-green btn-flat">
                              { continua[this.state.lang] }
                          </a>
                      </div>
                  </div>                    
              </div>

              <div style={{ height: '100%' }}>
                <ul id="slide-out" className="sidenav">
                  <div className="user-view">
                    <a href="https://airbnb.com/h/lacasitaconsulado" target="_blank">
                      <img 
                        style={{height: '9em', marginBottom: '2em'}} 
                        className="responsive-img" 
                        src="/media/airbnb/logo.jpg"
                      />
                    </a>
                  </div>
                  {
                    config.map((con, index) => {
                      return (
                        <li key={index} className="tablinks">
                          <a className="waves-effect"
                            id={ 'section-' + index }
                            onClick={(event) => this.tabClick(event, con.section_name[this.state.lang])}
                          >
                            {con.section_name[this.state.lang]}
                          </a>
                        </li>
                      )
                    })
                  }
                  <li style={{marginTop:'2em'}}>
                    <a className="waves-effect"onClick={() => this.state.modals[0].open()} style={{color:'gray'}} >
                      {inicio[this.state.lang]}
                    </a>
                  </li>
                </ul>
                  <a 
                    data-target="slide-out" 
                    className="sidenav-trigger btn-floating btn-large waves-effect waves-light red" 
                    style={{marginTop: '1em', marginLeft: '.6em'}} 
                  >
                      <i className="material-icons">
                        menu
                      </i>
                  </a>
                  <div className="tab-content-div">
                      { 
                          config.map((con, index) => {
                              return(
                                  <div id={con.section_name[this.state.lang]} className="tabcontent" key={index}>
                                      <h4>{con.section_name[this.state.lang]}</h4>
                                      {
                                          con.tasks.map((task, index) => {
                                              return (
                                                  <div key={index}>
                                                      <label>
                                                          <input type="checkbox" />
                                                          <span style={{height: 'auto', marginBottom: '1em'}}>
                                                              {
                                                                  this.state.lang === 1 && task.text.length === 2 ?
                                                                  task.text[this.state.lang] :
                                                                  task.text[0]
                                                              }
                                                          </span>
                                                      </label>
                                                      <div>
                                                          {task.content ? this.renderContent(task.content) : ''}
                                                      </div>
                                                  </div>
                                              )
                                          })
                                      }
                                  </div>
                              )
                          }) 
                      }
                  </div>
              </div>
              
          </div>
      );
  }

  renderContent(content) {
      const image = Array.isArray(content) ? content[this.state.lang] : content;
      return(
          <div className="row">
              <div className="col m6 offset-m3 s10 offset-s1">
                  <img className="responsive-img" src={`/media/airbnb/${image}`}></img>
              </div>
          </div>
      )
  }

  tabClick(event, sectionName) {
    // Declare all variables
    let i, tabcontent, tablinks;
  
    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
  
    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    //window.location.search = `#${sectionName}`;
  
    // Show the current tab, and add an "active" class to the link that opened the tab
    document.getElementById(sectionName).style.display = "block";
    event.currentTarget.parentElement.className += " active";
    if (this.state.sidenavs) {
      const that = this;
      setTimeout(() => {
        that.state.sidenavs[0].close();
      }, 500);   
    }
  }
}

ReactDOM.render(
  <Tabs />,
  document.getElementById('react-div')
);
